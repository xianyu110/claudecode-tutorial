# 13.2 MCP 提示與斜槓命令

MCP 提示和斜槓命令可以增強 Claude Code 的功能，提供更高效的互動方式。

## MCP 提示

### 什么是 MCP 提示


MCP 提示是預定義的提示模板，由 MCP 伺服器提供，用於常見任務。

### 提示类型

#### 1\. 工具提示


提供特定工具的使用指導：

```
    bash


    # 使用 GitHub PR 审查提示
    使用 GitHub 的 PR 审查模板

    # 输出
    正在使用 GitHub PR 审查提示...
    请提供 PR 编号进行审查

#### 2\. 资源提示

```

提供資源訪問的指導：

```
    bash


    # 使用数据库查询提示
    使用数据库的查询模板

    # 输出
    正在使用数据库查询模板...
    请提供 SQL 查询

#### 3\. 工作流提示

```

提供完整工作流的指導：

```
    bash


    # 使用代码审查工作流提示
    使用代码审查工作流

    # 输出
    正在使用代码审查工作流...
    步骤 1: 查看代码变更
    步骤 2: 分析代码质量
    步骤 3: 提供改进建议

### 使用 MCP 提示

#### 基本用法

    bash


    # 查看可用的提示
    /mcp

    # 输出示例
    MCP 提示：
    - github:pr-review: PR 审查模板
    - database:query: 数据库查询模板
    - code:review: 代码审查工作流

#### 使用提示

    bash


    # 使用 GitHub PR 审查提示
    使用 github:pr-review 提示审查 PR #123

    # 使用数据库查询提示
    使用 database:query 提示查询用户数据

    # 使用代码审查工作流提示
    使用 code:review 提示审查代码

### 自定义提示

#### 创建提示模板

```

在 MCP 伺服器中建立提示模板：

```
    json


    {
      "prompts": {
        "custom-review": {
          "name": "自定义代码审查",
          "description": "自定义的代码审查流程",
          "template": "请审查以下代码：\n\n1. 检查代码风格\n2. 分析代码逻辑\n3. 识别潜在问题\n4. 提供改进建议"
        }
      }
    }

#### 使用自定义提示

    bash


    # 使用自定义提示
    使用 custom-review 提示审查代码

## 斜杠命令

### 什么是斜杠命令

```

斜槓命令是 Claude Code 提供的快捷命令，用於快速執行常見操作。

### 内置斜杠命令

#### /init


初始化專案：

```
    bash


    /init

#### /plugin

```

管理外掛：

```
    bash


    /plugin install formatter@claude
    /plugin enable formatter
    /plugin disable formatter
    /plugin uninstall formatter

#### /mcp

```

管理 MCP 伺服器：

```
    bash


    /mcp

#### /agents

```

管理子代理：

```
    bash


    /agents

#### /config

```

配置 Claude Code：

```
    bash


    /config

#### /clear

```

清除對話歷史：

```
    bash


    /clear

#### /vim

```

啟用 Vim 編輯器模式：

```
    bash


    /vim

#### /memory

```

管理記憶體檔案：

```
    bash


    /memory

#### /hooks

```

管理鉤子：

```
    bash


    /hooks

#### /terminal-setup

```

配置終端設定：

```
    bash


    /terminal-setup

#### /sandbox

```

啟用沙箱隔離：

```
    bash


    /sandbox

#### /login

```

登入到 Claude Code：

```
    bash


    /login

#### /ide

```

IDE 相關命令：

```
    bash


    /ide

## MCP 斜杠命令

### MCP 服务器提供的斜杠命令

```

某些 MCP 伺服器可以提供自定義斜槓命令：

```
    bash


    # 查看可用的 MCP 斜杠命令
    /mcp

    # 输出示例
    MCP 斜杠命令：
    - /github-pr: 创建 GitHub PR
    - /db-query: 查询数据库
    - /sentry-error: 查询 Sentry 错误

## 创建自定义斜杠命令

### 个人斜杠命令

```

建立個人斜槓命令：

```bash
    bash


    # 创建命令目录
    mkdir -p ~/.claude/commands

    # 创建命令文件
    echo "Review this code for security vulnerabilities:" > ~/.claude/commands/security-review.md

    # 使用命令
    /security-review

### 项目斜杠命令

```

建立專案斜槓命令：

```bash
    bash


    # 创建命令目录
    mkdir -p .claude/commands

    # 创建命令文件
    echo "Review this code according to our coding standards:" > .claude/commands/team-review.md

    # 使用命令
    /team-review

### 命令参数

```

使用引數：

```
    bash


    # 创建带参数的命令
    cat > ~/.claude/commands/test.md << 'EOF'
    Run tests for $ARGUMENTS
    EOF

    # 使用命令
    /test --coverage

## 提示和命令的组合

### 组合使用

    bash


    # 使用 MCP 提示和斜杠命令
    /github-pr #123
    使用 github:pr-review 提示审查 PR #123

### 工作流自动化

    bash


    # 创建自动化工作流
    cat > ~/.claude/commands/deploy.md << 'EOF'
    部署工作流：
    1. 运行测试
    2. 构建应用
    3. 部署到生产环境
    EOF

    # 使用工作流
    /deploy

## 最佳实践

### 1\. 合理使用提示

    bash


    # 选择合适的提示
    使用 github:pr-review 提示审查 PR

    # 提供清晰的上下文
    使用 github:pr-review 提示审查 PR #123，重点关注安全性

### 2\. 创建有用的命令

    bash


    # 创建常用任务的命令
    cat > ~/.claude/commands/lint.md << 'EOF'
    Run linter and fix all issues
    EOF

    # 创建团队标准命令
    cat > .claude/commands/team-lint.md << 'EOF'
    Run team linter with our coding standards
    EOF

### 3\. 参数化命令

    bash


    # 使用参数使命令更灵活
    cat > ~/.claude/commands/test.md << 'EOF'
    Run tests for $ARGUMENTS
    EOF

    # 使用命令
    /test --coverage --watch

### 4\. 文档化命令

    bash


    # 添加文档注释
    cat > ~/.claude/commands/review.md << 'EOF'
    <!--
    Usage: /review [file]
    Description: Review code file for quality and security
    -->
    Review this code file:
    EOF

## 故障排除

### 提示不工作


**問題** : MCP 提示無法使用

**解决方案** :

    bash


    # 1. 检查 MCP 服务器状态
    /mcp

    # 2. 查看可用提示
    列出所有 MCP 提示

    # 3. 重新连接服务器
    重新连接 MCP 服务器

    # 4. 查看错误日志
    显示错误日志

### 斜杠命令不工作

```

**問題** : 斜槓命令無法使用

```bash
**解决方案** :

    bash


    # 1. 检查命令文件
    ls ~/.claude/commands/
    ls .claude/commands/

    # 2. 验证命令语法
    cat ~/.claude/commands/command-name.md

    # 3. 重启 Claude Code
    # 退出并重新启动

    # 4. 查看错误日志
    claude --verbose

### 参数不传递

```

**問題** : 命令引數未正確傳遞

```yaml
**解决方案** :

    bash


    # 1. 检查命令模板
    cat ~/.claude/commands/command-name.md

    # 2. 验证参数语法
    # 确保使用 $ARGUMENTS

    # 3. 测试命令
    /command-name test-argument

    # 4. 查看输出
    # 检查参数是否正确传递

## 高级用法

### 条件命令

    bash


    # 创建条件命令
    cat > ~/.claude/commands/deploy.md << 'EOF'
    If environment is production:
      部署到生产环境
    Else:
      部署到测试环境
    EOF

### 循环命令

    bash


    # 创建循环命令
    cat > ~/.claude/commands/batch-test.md << 'EOF'
    For each test file:
      1. Run tests
      2. Collect results
      3. Report failures
    EOF

### 嵌套命令

    bash


    # 创建嵌套命令
    cat > ~/.claude/commands/full-review.md << 'EOF'
    1. Run /lint
    2. Run /test
    3. Run /security-review
    4. Generate report
    EOF

```
