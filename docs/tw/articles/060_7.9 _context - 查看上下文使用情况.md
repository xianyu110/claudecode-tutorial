# 7.9 /context - 檢視上下文使用情況

## 概述
`/context` 命令用於將當前上下文使用情況視覺化為彩色網格，幫助你瞭解 token 使用情況，最佳化對話效率。

```
## 基本语法

    bash


    /context

## 功能说明

```
執行 `/context` 命令後，Claude Code 會：

  1. 分析當前會話的上下文使用情況
  2. 以彩色網格形式顯示 token 使用分佈
  3. 顯示各元件的 token 佔用比例
  4. 提供最佳化建議

## 視覺化說明
彩色網格使用不同顏色表示不同的上下文元件：

  * **綠色** ：對話歷史
  * **藍色** ：檔案內容
  * **黃色** ：系統提示
  * **紅色** ：接近上限
  * **灰色** ：未使用空間

```yaml
## 使用场景

### 1\. 监控 token 使用

    bash


    # 在长时间对话中定期检查
    /context

    # 查看当前 token 使用情况

### 2\. 诊断性能问题

    bash


    # 当响应变慢时
    /context

    # 检查是否因上下文过大导致

### 3\. 优化对话

    bash


    # 查看 token 使用分布
    /context

    # 根据结果优化对话策略

## 输出示例

    bash


    Context Usage:
    ███████████████████████████████████████████████████ 85%
    [GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG]
    [BBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBB]
    [YYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYY]

    Components:
    - Conversation History: 45,000 tokens (45%)
    - File Contents: 30,000 tokens (30%)
    - System Prompts: 10,000 tokens (10%)
    - Available: 15,000 tokens (15%)

    Total: 100,000 / 200,000 tokens

## 优化建议

### 1\. 减少文件引用

    bash


    # 避免引用过多文件
    # 只引用当前需要的文件

### 2\. 压缩对话历史

    bash


    # 使用 /compact 压缩对话
    /compact

### 3\. 清除不必要的内容

    bash


    # 使用 /clear 清空对话
    /clear

## 注意事项

```
  1. 上下文視窗大小取決於使用的模型
  2. 不同的模型有不同的 token 限制
  3. 接近上限時，建議壓縮或清除上下文
  4. 彩色網格是實時更新的

```
## 与其他命令的配合使用

    bash


    # 查看上下文，然后优化
    /context
    /compact
    /context

    # 执行流程：
    # 1. 查看当前上下文使用情况
    # 2. 压缩对话历史
    # 3. 再次查看，确认优化效果

## 最佳实践

```
  1. **定期檢查** ：在長時間對話中定期使用 `/context` 檢查
  2. **及時最佳化** ：當使用率超過 70% 時，考慮最佳化
  3. **合理引用** ：只引用當前任務需要的檔案
  4. **壓縮歷史** ：定期使用 `/compact` 壓縮對話歷史

## 總結
`/context` 命令是 Claude Code 中用於監控上下文使用的重要工具。透過使用此命令，你可以：

  * 視覺化當前上下文使用情況
  * 瞭解 token 使用分佈
  * 診斷效能問題
  * 最佳化對話效率

合理使用 `/context` 命令可以幫助你更好地管理 token 使用，提高對話效率。