# 7.14 /compact - 壓縮對話歷史

## 概述
`/compact` 命令是 Claude Code 的核心命令之一，用於壓縮對話歷史，保留核心資訊，減少 token 消耗，同時保持對話的連貫性。

```
## 基本语法

    bash


    /compact

## 功能说明

```
執行 `/compact` 命令後，Claude Code 會：

  1. 分析當前對話歷史
  2. 保留對話的核心資訊和上下文
  3. 壓縮對話內容，減少 token 數量
  4. 保持對話的連貫性，使 Claude 能夠繼續理解後續對話

```
## 使用场景

### 1\. 对话过长时压缩

    bash


    # 当对话持续很久，上下文累积过多时
    /compact

    # 压缩对话历史，减少 token 消耗

### 2\. 任务切换前压缩

    bash


    # 在完成一个任务，准备开始新任务前
    /compact

    # 保留核心信息，为新任务腾出上下文空间

### 3\. token 消耗过高时压缩

    bash


    # 当提示 token 消耗过高时
    /compact

    # 降低后续对话的 token 消耗

### 4\. 定期压缩保持效率

    bash


    # 在长时间对话中定期压缩
    /compact

    # 保持对话效率，避免上下文过长

## 注意事项

```
  1. `/compact` 命令無任何引數，執行後會自動壓縮對話歷史
  2. 壓縮過程會保留對話的核心資訊和上下文
  3. 壓縮後無法恢復原始對話歷史
  4. 壓縮可以顯著減少 token 消耗，提高對話效率
  5. 不會影響已生成的 `CLAUDE.md` 檔案或其他專案檔案

```
## 与其他命令的组合

    bash


    # 压缩对话历史后，开始新的对话
    /compact
    /clear

    # 执行流程：
    # 1. 压缩对话历史，保留核心信息
    # 2. 清空历史对话，开始全新的对话
    # 3. 新对话会保留压缩后的核心信息

## 最佳实践

```
  1. **對話過長時使用** ：當對話超過 20 輪或 token 消耗過高時，建議使用 `/compact`
  2. **任務切換前使用** ：在完成一個任務，準備開始新任務前使用 `/compact`
  3. **定期使用** ：在長時間對話中，每完成一個子任務後使用 `/compact`
  4. **結合 /clear 使用** ：在需要完全重置對話時，先使用 `/compact` 保留核心資訊，再使用 `/clear` 清空對話

## 總結
`/compact` 命令是 Claude Code 中用於管理對話歷史的重要命令。透過使用此命令，你可以：

  * 壓縮對話歷史，減少 token 消耗
  * 保留對話的核心資訊和上下文
  * 提高對話效率
  * 為新任務騰出上下文空間

合理使用 `/compact` 命令可以幫助你在與 Claude Code 互動時保持高效，減少不必要的 token 消耗。