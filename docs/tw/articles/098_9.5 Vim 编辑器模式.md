# 9.5 Vim 編輯器模式

Claude Code 提供了全面的 Vim 編輯器模式支援，讓 Vim 使用者可以使用熟悉的快捷鍵進行高效編輯。無論您是 Vim 新手還是資深使用者，都能在 Claude Code 中找到舒適的編輯體驗。

## 启用 Vim 模式

### 1\. 临时启用


您可以使用 `/vim` 命令臨時啟用 Vim 模式：

```
    bash


    /vim
    Vim 模式已启用

### 2\. 永久配置

```

如果您希望每次啟動 Claude Code 都自動啟用 Vim 模式，可以透過配置檔案進行設定：

```
    bash


    /config
    # 在配置界面中设置 vim 模式为 true

### 3\. 切换回普通模式

```

您可以使用 `/novim` 命令關閉 Vim 模式：

```
    bash


    /novim
    Vim 模式已禁用

## 模式切换


Vim 的核心是模式切換，Claude Code 支援所有標準的 Vim 模式：

### 1\. 進入 NORMAL 模式

從 INSERT 模式按 `Esc` 鍵進入 NORMAL 模式：

    bash


    [在 INSERT 模式输入文本]
    [按 Esc]
    [进入 NORMAL 模式]

### 2\. 进入 INSERT 模式

```

在 NORMAL 模式下，您可以使用以下命令進入 INSERT 模式：

命令| 操作| 說明
---|---|---

`i`| 在游標前插入| 最常用的插入方式
`I`| 在行首插入| 跳轉到行首並開始插入
`a`| 在游標後插入| 在游標所在位置之後插入
`A`| 在行尾插入| 跳轉到行尾並開始插入
`o`| 在下方開啟新行| 在當前行下方建立新行並插入
`O`| 在上方開啟新行| 在當前行上方建立新行並插入
`gi`| 回到上次插入位置| 跳轉到上次插入文字的位置

#### 示例

    bash


    # 在 NORMAL 模式
    Hello World[光标]

    # 按 i 在光标前插入
    Hello[光标] World

    # 按 A 在行尾插入
    Hello World[光标]

### 3\. 进入 VISUAL 模式


在 NORMAL 模式下，您可以使用以下命令進入 VISUAL 模式：

命令| 操作
---|---

`v`| 進入普通 VISUAL 模式
`V`| 進入行 VISUAL 模式
`Ctrl+v`| 進入塊 VISUAL 模式

### 4\. 進入 COMMAND 模式

在 NORMAL 模式下，按 `:` 鍵進入 COMMAND 模式，用於執行各種 Vim 命令。

## 导航 (NORMAL 模式)

### 1\. 基本移动


命令| 操作
---|---

`h`| 向左移動一個字元
`j`| 向下移動一行
`k`| 向上移動一行
`l`| 向右移動一個字元

### 2\. 單詞導航

命令| 操作
---|---

`w`| 移動到下一個單詞開頭
`e`| 移動到當前單詞末尾
`b`| 移動到上一個單詞開頭
`ge`| 移動到上一個單詞末尾
`W`| 移動到下一個以空格分隔的單詞開頭
`E`| 移動到當前以空格分隔的單詞末尾
`B`| 移動到上一個以空格分隔的單詞開頭

### 3\. 行導航

命令| 操作
---|---

`0`| 移動到行首
`$`| 移動到行尾
`^`| 移動到第一個非空白字元
`g_`| 移動到最後一個非空白字元

### 4\. 檔案導航

命令| 操作
---|---

`gg`| 移動到檔案開頭
`G`| 移動到檔案末尾
`nG`| 移動到第 n 行
`:n`| 移動到第 n 行

### 5\. 螢幕導航

命令| 操作
---|---

`Ctrl+u`| 向上滾動半屏
`Ctrl+d`| 向下滾動半屏
`Ctrl+b`| 向上滾動一屏
`Ctrl+f`| 向下滾動一屏
`zz`| 將當前行居中顯示
`zt`| 將當前行顯示在螢幕頂部
`zb`| 將當前行顯示在螢幕底部

```
### 示例

    bash


    # 基本移动
    Hello World
    [按 l]  # 光标向右移动一个字符
    Hello World[光标]

    # 单词导航
    Hello World
    [按 w]  # 移动到下一个单词开头
    Hello World[光标]

    # 行导航
    Hello World
    [按 $]  # 移动到行尾
    Hello World[光标]

    # 文件导航
    [按 gg]  # 移动到文件开头

## 编辑操作

### 1\. 删除操作

```

命令| 操作
---|---

`x`| 刪除游標所在字元
`X`| 刪除游標前一個字元
`dw`| 刪除從游標到下一個單詞開頭
`de`| 刪除從游標到當前單詞末尾
`d$`| 刪除從游標到行尾
`dd`| 刪除當前行
`ndd`| 刪除 n 行

### 2\. 複製和貼上

命令| 操作
---|---

`yy`| 複製當前行
`nyy`| 複製 n 行
`yw`| 複製從游標到下一個單詞開頭
`p`| 在游標後貼上
`P`| 在游標前貼上

### 3\. 撤銷和重做

命令| 操作
---|---

`u`| 撤銷上一次操作
`Ctrl+r`| 重做上一次撤銷的操作

### 4\. 替換操作

命令| 操作
---|---

`r`| 替換游標所在字元
`R`| 進入替換模式，連續替換多個字元

## 搜索和替换

### 1\. 搜索


命令| 操作
---|---

`/pattern`| 向下搜尋 pattern
`?pattern`| 向上搜尋 pattern
`n`| 跳轉到下一個匹配
`N`| 跳轉到上一個匹配

### 2\. 替換

命令| 操作
---|---

`:%s/old/new/g`| 全域性替換所有 old 為 new
`:%s/old/new/gc`| 全域性替換並確認每個替換
`:n,m s/old/new/g`| 在第 n 到 m 行替換

## 最佳實踐

  1. **熟悉基本移動** ：掌握 `h`, `j`, `k`, `l` 等基本移動命令是高效使用 Vim 的基礎
  2. **使用單詞導航** ：`w`, `e`, `b` 等單詞導航命令比逐字元移動更高效
  3. **善用模式切換** ：熟練掌握模式切換可以大大提高編輯效率
  4. **使用重複命令** ：很多命令可以透過數字字首重複執行，如 `3dd` 刪除 3 行
  5. **學習組合命令** ：Vim 的強大之處在於命令組合，如 `d2w` 刪除 2 個單詞

## 故障排除

### Vim 模式不生效


  * 確保您已經執行了 `/vim` 命令
  * 檢查配置檔案中 Vim 模式是否已啟用
  * 嘗試重啟 Claude Code 會話

### 快捷鍵衝突


  * 如果某些快捷鍵不工作，可能是與終端快捷鍵衝突
  * 嘗試在配置中調整快捷鍵對映
  * 檢視終端的快捷鍵設定

### 模式切換問題


  * 確保您在正確的模式下執行命令
  * 按 `Esc` 鍵可以隨時回到 NORMAL 模式
  * 嘗試使用 `Ctrl+[` 作為 `Esc` 的替代

## 高级技巧

### 1\. 标记和跳转


命令| 操作
---|---

`ma`| 在當前位置設定標記 a
`'a`| 跳轉到標記 a 所在行的行首
``a`| 跳轉到標記 a 所在的精確位置

### 2\. 宏錄製

命令| 操作
---|---

`qa`| 開始錄製宏到暫存器 a
`q`| 停止錄製宏
`@a`| 執行暫存器 a 中的宏
`@@`| 重複執行上一個宏

### 3\. 多檔案編輯

命令| 操作
---|---

`:e filename`| 編輯另一個檔案
`:n`| 編輯下一個檔案
`:p`| 編輯上一個檔案
`:ls`| 列出當前開啟的檔案
`:b filename`| 切換到另一個檔案

透過掌握這些 Vim 編輯技巧，您可以在 Claude Code 中享受到高效的編輯體驗，充分發揮 Vim 的強大功能。

## 编辑 (NORMAL 模式)

### 删除操作


命令| 操作
---|---

`x`| 刪除字元
`dd`| 刪除行
`D`| 刪除到行尾
`dw`| 刪除單詞
`de`| 刪除到單詞末尾
`db`| 向後刪除單詞

### 更改操作

命令| 操作
---|---

`cc`| 更改行
`C`| 更改到行尾
`cw`| 更改單詞
`ce`| 更改到單詞末尾
`cb`| 向後更改單詞

### 重複操作

命令| 操作
---|---

`.`| 重複上次更改

```javascript
### 示例

    bash


    # 删除字符
    Hello World
    [按 x]
    Hllo World

    # 删除行
    Hello World
    [按 dd]
    [空行]

    # 更改行
    Hello World
    [按 cc]
    [输入新内容]

## 常用组合

### 数字前缀

    bash


    # 删除 3 个字符
    Hello World
    [按 3x]
    lo World

    # 删除 2 行
    Line 1
    Line 2
    Line 3
    [按 2dd]
    Line 3

### 删除+插入

    bash


    # 删除单词并进入插入模式
    Hello World
    [按 cw]
    [输入新单词]

## 使用场景

### 快速编辑

    bash


    # 快速删除单词
    function calculateTotal(items) {
    [按 dw]

    function (items) {

### 精确定位

    bash


    # 跳到行尾
    const result = calculateTotal(items);
    [按 $]
    const result = calculateTotal(items);[光标]

### 批量修改

    bash


    # 重复修改
    item1, item2, item3
    [按 f, 然后 r.)]
    item1. item2. item3

```
