# 2.3 命令列工具安裝

## 2.3.1 概述
Claude Code提供了命令列工具，允許開發者在終端或命令提示符中使用Claude Code的功能。命令列工具特別適合那些更喜歡使用終端進行開發的開發者，或者需要在CI/CD流水線中整合Claude Code的場景。

```
## 2.3.2 安装命令行工具

### 2.3.2.1 使用npm安装（推荐）

```
Claude Code的命令列工具可以透過npm全域性安裝：

```
    bash


    npm install -g claude-code

### 2.3.2.2 使用yarn安装

```
如果你使用yarn作為包管理器，可以使用以下命令安裝：

```
    bash


    yarn global add claude-code

### 2.3.2.3 使用pnpm安装

```
如果你使用pnpm作為包管理器，可以使用以下命令安裝：

```
    bash


    pnpm add -g claude-code

## 2.3.3 验证安装

```
安裝完成後，可以透過以下命令驗證Claude Code命令列工具是否已正確安裝：

```
    bash


    # 检查Claude Code版本
    claude --version

    # 或使用缩写
    cl --version

```
如果輸出顯示Claude Code的版本資訊，則說明命令列工具已正確安裝。

## 2.3.4 配置命令列工具
安裝完成後，需要進行一些基本配置才能使用Claude Code命令列工具。

### 2.3.4.1 登入Claude賬戶
在使用命令列工具之前，需要先登入Claude賬戶：

```
    bash


    # 登录Claude账户
    claude login
    # 或使用缩写
    cl login

```
執行上述命令後，會開啟預設瀏覽器，跳轉到Claude Code的登入頁面。輸入你的Claude賬戶憑據進行登入，登入成功後，瀏覽器會顯示"授權成功"的提示，命令列工具會自動完成授權。

### 2.3.4.2 配置預設模型
可以透過以下命令配置預設使用的Claude模型：

```
    bash


    # 配置默认模型为Opus 4
    claude config set model claude-4-opus

    # 或配置为Sonnet 4
    claude config set model claude-4-sonnet

### 2.3.4.3 查看配置

```
可以透過以下命令檢視當前的配置：

```
    bash


    # 查看所有配置
    claude config list
    # 查看特定配置项
    claude config get model

## 2.3.5 基本命令使用

### 2.3.5.1 帮助命令

```
可以使用以下命令檢視Claude Code命令列工具的幫助資訊：

```
    bash


    # 查看所有命令
    claude help

    # 查看特定命令的帮助
    claude help chat

    ### 2.3.5.2 聊天命令

    可以使用`chat`命令与Claude Code进行对话：

    # 启动交互式聊天
    claude chat
    # 或使用缩写
    cl chat

### 2.3.5.3 代码生成命令

```
可以使用`code`命令生成程式碼：

```javascript
    bash


    # 生成一个简单的Python函数
    claude code "write a Python function to calculate Fibonacci numbers"

### 2.3.5.4 代码解释命令

```
可以使用`explain`命令解釋程式碼：

```python
    bash


    # 解释一个Python函数
    claude explain "def fib(n): return 1 if n <= 1 else fib(n-1) + fib(n-2)"

### 2.3.5.5 代码执行命令

```
可以使用`run`命令執行生成的程式碼：

```python
    bash


    # 执行一个Python函数
    claude run "def fib(n): return 1 if n <= 1 else fib(n-1) + fib(n-2)"

## 2.3.6 命令行工具的高级配置

### 2.3.6.1 配置输出格式

```
可以配置命令列工具的輸出格式：

```
    bash


    # 配置输出格式为JSON
    claude config set output-format json

    # 配置输出格式为文本（默认）
    claude config set output-format text

    ### 2.3.6.2 配置超时时间

    可以配置命令行工具的超时时间：

    # 配置超时时间为60秒
    claude config set timeout 60

### 2.3.6.3 配置代理

```
如果你的網路環境需要使用代理，可以配置命令列工具的代理：

```
    bash


    # 配置HTTP代理
    claude config set proxy http://proxy.example.com:8080

    # 取消代理配置
    claude config unset proxy

## 2.3.7 常见问题与解决方案

### 2.3.7.1 命令未找到

```
**問題** ：執行`claude`命令時顯示"command not found"

**解決方案** ：

  * 確保已正確安裝Claude Code命令列工具
  * 檢查npm全域性安裝路徑是否已新增到系統環境變數中
```bash
  * 对于macOS和Linux，可以将以下行添加到`~/.bashrc`或`~/.zshrc`文件中： bash export PATH="$HOME/.npm/bin:$PATH"
    * 对于Windows，确保`%USERPROFILE%\AppData\Roaming\npm`已添加到系统环境变量中

### 2.3.7.2 登录失败

```
**問題** ：執行`claude login`命令後，瀏覽器開啟但無法登入

**解決方案** ：

  * 檢查網路連線
  * 確保你使用的是正確的Claude賬戶憑據
  * 檢查瀏覽器是否阻止了彈出視窗
  * 嘗試清除瀏覽器快取和Cookie
  * 嘗試使用不同的瀏覽器進行授權

### 2.3.7.3 命令執行失敗
**問題** ：執行Claude Code命令時顯示"API request failed"

**解決方案** ：

  * 檢查網路連線
  * 確保已正確登入Claude賬戶
  * 檢查配置的模型是否可用
  * 嘗試增加超時時間
  * 檢查是否有防火牆或代理設定阻止了API請求

## 2.3.8 命令列工具更新
可以透過以下命令更新Claude Code命令列工具：

```
    bash


    # 使用npm更新
    npm update -g claude-code
    # 使用yarn更新
    yarn global upgrade claude-code
    # 使用pnpm更新
    pnpm update -g claude-code

## 2.3.9 卸载命令行工具

```
如果需要解除安裝Claude Code命令列工具，可以使用以下命令：

```
    bash


    # 使用npm卸载
    npm uninstall -g claude-code

    # 使用yarn卸载
    yarn global remove claude-code

    # 使用pnpm卸载
    pnpm remove -g claude-code

## 2.3.10 命令行工具的使用场景

```
Claude Code命令列工具適合以下場景：

  1. **終端愛好者** ：喜歡在終端中進行開發的開發者
  2. **CI/CD流水線** ：在持續整合/持續部署流水線中整合Claude Code
  3. **指令碼編寫** ：編寫自動化指令碼時使用Claude Code生成程式碼
  4. **批次處理** ：批次處理程式碼檔案或生成多個程式碼片段
  5. **遠端伺服器** ：在遠端伺服器上使用Claude Code（無圖形介面環境）

## 2.3.11 總結
Claude Code命令列工具提供了一種在終端中使用Claude Code功能的方式，適合終端愛好者和需要在CI/CD流水線中整合Claude Code的場景。透過本小節的指導，你應該已經成功安裝並配置了Claude Code命令列工具，可以開始使用它來輔助你的開發工作了。

接下來，我們將介紹如何註冊Claude賬戶和進行授權，這是使用Claude Code的必要步驟。