# 7.9 /context - 查看上下文使用情况

## 概述#

`/context` 命令用于将当前上下文使用情况可视化为彩色网格，帮助你了解 token 使用情况，优化对话效率。

## 基本语法#

    bash

    复制

    /context

## 功能说明#

执行 `/context` 命令后，Claude Code 会：

  1. 分析当前会话的上下文使用情况
  2. 以彩色网格形式显示 token 使用分布
  3. 显示各组件的 token 占用比例
  4. 提供优化建议

## 可视化说明#

彩色网格使用不同颜色表示不同的上下文组件：

  * **绿色** ：对话历史
  * **蓝色** ：文件内容
  * **黄色** ：系统提示
  * **红色** ：接近上限
  * **灰色** ：未使用空间

## 使用场景#

### 1\. 监控 token 使用#

    bash

    复制

    # 在长时间对话中定期检查
    /context

    # 查看当前 token 使用情况

### 2\. 诊断性能问题#

    bash

    复制

    # 当响应变慢时
    /context

    # 检查是否因上下文过大导致

### 3\. 优化对话#

    bash

    复制

    # 查看 token 使用分布
    /context

    # 根据结果优化对话策略

## 输出示例#

    bash

    复制

    Context Usage:
    ███████████████████████████████████████████████████ 85%
    [GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG]
    [BBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBB]
    [YYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYY]

    Components:
    - Conversation History: 45,000 tokens (45%)
    - File Contents: 30,000 tokens (30%)
    - System Prompts: 10,000 tokens (10%)
    - Available: 15,000 tokens (15%)

    Total: 100,000 / 200,000 tokens

## 优化建议#

### 1\. 减少文件引用#

    bash

    复制

    # 避免引用过多文件
    # 只引用当前需要的文件

### 2\. 压缩对话历史#

    bash

    复制

    # 使用 /compact 压缩对话
    /compact

### 3\. 清除不必要的内容#

    bash

    复制

    # 使用 /clear 清空对话
    /clear

## 注意事项#

  1. 上下文窗口大小取决于使用的模型
  2. 不同的模型有不同的 token 限制
  3. 接近上限时，建议压缩或清除上下文
  4. 彩色网格是实时更新的

## 与其他命令的配合使用#

    bash

    复制

    # 查看上下文，然后优化
    /context
    /compact
    /context

    # 执行流程：
    # 1. 查看当前上下文使用情况
    # 2. 压缩对话历史
    # 3. 再次查看，确认优化效果

## 最佳实践#

  1. **定期检查** ：在长时间对话中定期使用 `/context` 检查
  2. **及时优化** ：当使用率超过 70% 时，考虑优化
  3. **合理引用** ：只引用当前任务需要的文件
  4. **压缩历史** ：定期使用 `/compact` 压缩对话历史

## 总结#

`/context` 命令是 Claude Code 中用于监控上下文使用的重要工具。通过使用此命令，你可以：

  * 可视化当前上下文使用情况
  * 了解 token 使用分布
  * 诊断性能问题
  * 优化对话效率

合理使用 `/context` 命令可以帮助你更好地管理 token 使用，提高对话效率。