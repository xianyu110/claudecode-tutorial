# 7.11 /doctor - 检查安装健康状况

## 概述

`/doctor` 命令用于检查 Claude Code 的安装健康状况，诊断常见问题，并提供修复建议。

## 基本语法

    bash


    /doctor

## 功能说明


执行 `/doctor` 命令后，Claude Code 会：

  1. 检查系统环境
  2. 验证安装完整性
  3. 测试网络连接
  4. 检查配置文件
  5. 提供诊断报告和修复建议

## 检查项目

### 1\. 系统环境


  * 操作系统版本
  * Node.js 版本
  * 内存和磁盘空间

### 2\. 安装完整性

  * Claude Code 版本
  * 依赖包完整性
  * 可执行文件路径

### 3\. 网络连接

  * Anthropic API 连接
  * 代理设置
  * DNS 解析

### 4\. 配置文件

  * 配置文件语法
  * 配置文件路径
  * 配置项有效性

### 5\. 认证状态

  * 登录状态
  * 令牌有效性
  * 账户权限

```python
## 使用场景

### 1\. 遇到问题时诊断

    bash


    # 当 Claude Code 出现问题时
    /doctor

    # 查看诊断报告

### 2\. 安装后验证

    bash


    # 安装完成后验证
    /doctor

    # 确保安装正常

### 3\. 定期健康检查

    bash


    # 定期运行健康检查
    /doctor

    # 确保系统运行正常

## 输出示例

    bash


    Claude Code Health Check
    ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

    ✓ System Environment
      - OS: Windows 11
      - Node.js: v18.17.0
      - Memory: 16 GB
      - Disk: 50 GB available

    ✓ Installation
      - Version: 1.0.124
      - Dependencies: All installed
      - Executable: Found at C:\Program Files\claude\bin\claude.exe

    ✓ Network Connection
      - API Connection: OK
      - Proxy: Not configured
      - DNS: Resolving correctly

    ✓ Configuration
      - Config File: Valid
      - Config Path: C:\Users\user\.config\claude\config.json
      - Settings: All valid

    ✓ Authentication
      - Status: Logged in
      - Token: Valid
      - Permissions: Full access

    Overall Status: ✓ Healthy

## 常见问题诊断

### 问题 1：网络连接失败

    bash


    ✗ Network Connection
      - API Connection: Failed
      - Error: Connection timeout

    Suggested Fix:
    1. Check internet connection
    2. Verify proxy settings
    3. Try disabling VPN

### 问题 2：认证失败

    bash


    ✗ Authentication
      - Status: Not logged in
      - Error: Invalid token

    Suggested Fix:
    1. Run /logout
    2. Run /login
    3. Verify account credentials

### 问题 3：配置文件错误

    bash


    ✗ Configuration
      - Config File: Invalid syntax
      - Error: Unexpected token at line 10

    Suggested Fix:
    1. Check config.json syntax
    2. Run /config to reset settings
    3. Restore from backup

## 注意事项

```

  1. `/doctor` 不会修改任何文件或设置
  2. 诊断报告会保存到日志文件中
  3. 某些检查可能需要网络连接
  4. 修复建议需要手动执行

## 与其他命令的配合使用

    bash


    # 诊断问题，然后修复
    /doctor
    /login
    /doctor

    # 执行流程：
    # 1. 运行诊断检查
    # 2. 根据建议执行修复
    # 3. 再次运行诊断确认修复

## 最佳实践


  1. **安装后检查** ：安装完成后立即运行 `/doctor`
  2. **问题诊断** ：遇到问题时首先运行 `/doctor`
  3. **定期检查** ：定期运行健康检查，确保系统正常
  4. **备份配置** ：在修改配置前，先备份配置文件

## 总结

`/doctor` 命令是 Claude Code 中用于诊断问题的重要工具。通过使用此命令，你可以：

  * 检查系统环境
  * 验证安装完整性
  * 测试网络连接
  * 检查配置文件
  * 获取修复建议

合理使用 `/doctor` 命令可以帮助你快速诊断和解决 Claude Code 的问题。
