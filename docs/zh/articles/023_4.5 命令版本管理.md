# 4.5 命令版本管理

Claude Code 会定期更新，添加新功能、改进现有功能、修复 bug。了解命令版本管理可以帮助您保持 Claude Code 的最新状态，并了解版本之间的差异。

```
## 版本信息

### 查看当前版本

```
您可以通过以下方式查看当前安装的 Claude Code 版本：

#### CLI 命令
claude --version

```
#### 交互式命令

    bash


    /version

```
这会显示当前安装的 Claude Code 版本号。

### 版本号格式
Claude Code 使用语义化版本号格式：`MAJOR.MINOR.PATCH`

  * **MAJOR（主版本号）** ：重大更新，可能包含不兼容的 API 变更
  * **MINOR（次版本号）** ：新功能添加，向后兼容
  * **PATCH（修订号）** ：bug 修复和小改进，向后兼容

例如：`2.1.3` 表示主版本 2，次版本 1，修订号 3。

```
## 更新 Claude Code

### 使用 `claude update` 命令

```
Claude Code 提供了方便的更新命令，可以自动检查并安装最新版本。

```
#### 基本用法

    bash


    claude update

```
这会执行以下操作：

  1. 检查是否有新版本可用
  2. 下载最新版本的安装包
  3. 安装新版本
  4. 清理旧版本的文件

#### 更新过程
更新过程通常包括以下步骤：

  1. **检查更新** ：连接到更新服务器，检查最新版本
  2. **下载更新** ：下载更新包（可能需要几分钟）
  3. **验证更新** ：验证下载的更新包的完整性
  4. **安装更新** ：安装新版本（可能需要管理员权限）
  5. **清理** ：删除临时文件和旧版本
  6. **确认** ：显示更新完成信息和新版本号

```
### 更新选项

#### 检查更新但不安装

```
某些情况下，您可能只想检查是否有更新，而不立即安装：

```
    bash


    claude update --check-only

```
这会显示是否有新版本可用，但不会执行安装。

#### 指定版本
在某些情况下，您可能需要安装特定版本：

```
    bash


    claude update --version 2.1.0

```
这会安装指定的版本，而不是最新版本。

#### 预览版本
如果您想尝试预览版本（可能包含新功能，但可能有 bug）：

```
    bash


    claude update --preview

```
这会安装最新的预览版本。

```
## 版本兼容性

### 命令兼容性

```
不同版本的 Claude Code 可能支持不同的命令和标志：

  * **新增命令** ：新版本可能添加新的命令
  * **废弃命令** ：旧命令在新版本中可能被废弃
  * **删除命令** ：某些命令在新版本中可能被删除
  * **命令变更** ：命令的语法或行为可能发生变化

### 标志兼容性
不同版本的 Claude Code 可能支持不同的标志：

  * **新增标志** ：新版本可能添加新的标志
  * **废弃标志** ：旧标志在新版本中可能被废弃
  * **删除标志** ：某些标志在新版本中可能被删除
  * **标志变更** ：标志的语法或行为可能发生变化

### 配置兼容性
不同版本的 Claude Code 可能使用不同的配置格式：

  * **配置结构** ：配置文件的结构可能发生变化
  * **配置选项** ：配置选项可能被添加、删除或重命名
  * **默认值** ：配置选项的默认值可能发生变化
  * **验证规则** ：配置验证规则可能变得更加严格

```
## 版本迁移

### 升级到新版本

```
当您升级到新版本时，可能需要进行一些迁移工作：

  1. **阅读发布说明** ：了解新版本的变化和改进
  2. **检查废弃警告** ：注意废弃的功能，准备迁移
  3. **更新配置** ：根据新的配置格式更新配置文件
  4. **测试功能** ：测试常用的功能，确保正常工作
  5. **报告问题** ：如果发现问题，及时报告

### 降级到旧版本
如果新版本有问题，您可能需要降级到旧版本：

```
    bash


    claude update --version 2.0.14
```