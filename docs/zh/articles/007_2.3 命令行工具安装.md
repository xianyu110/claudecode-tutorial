# 2.3 命令行工具安装

## 2.3.1 概述

Claude Code提供了命令行工具，允许开发者在终端或命令提示符中使用Claude Code的功能。命令行工具特别适合那些更喜欢使用终端进行开发的开发者，或者需要在CI/CD流水线中集成Claude Code的场景。

## 2.3.2 安装命令行工具

### 2.3.2.1 使用npm安装（推荐）


Claude Code的命令行工具可以通过npm全局安装：

```
    bash


    npm install -g claude-code

### 2.3.2.2 使用yarn安装

```

如果你使用yarn作为包管理器，可以使用以下命令安装：

```
    bash


    yarn global add claude-code

### 2.3.2.3 使用pnpm安装

```

如果你使用pnpm作为包管理器，可以使用以下命令安装：

```
    bash


    pnpm add -g claude-code

## 2.3.3 验证安装

```

安装完成后，可以通过以下命令验证Claude Code命令行工具是否已正确安装：

```
    bash


    # 检查Claude Code版本
    claude --version

    # 或使用缩写
    cl --version


如果输出显示Claude Code的版本信息，则说明命令行工具已正确安装。

## 2.3.4 配置命令行工具

安装完成后，需要进行一些基本配置才能使用Claude Code命令行工具。

### 2.3.4.1 登录Claude账户

在使用命令行工具之前，需要先登录Claude账户：

    bash


    # 登录Claude账户
    claude login
    # 或使用缩写
    cl login


执行上述命令后，会打开默认浏览器，跳转到Claude Code的登录页面。输入你的Claude账户凭据进行登录，登录成功后，浏览器会显示"授权成功"的提示，命令行工具会自动完成授权。

### 2.3.4.2 配置默认模型

可以通过以下命令配置默认使用的Claude模型：

    bash


    # 配置默认模型为Opus 4
    claude config set model claude-4-opus

    # 或配置为Sonnet 4
    claude config set model claude-4-sonnet

### 2.3.4.3 查看配置

```

可以通过以下命令查看当前的配置：

```
    bash


    # 查看所有配置
    claude config list
    # 查看特定配置项
    claude config get model

## 2.3.5 基本命令使用

### 2.3.5.1 帮助命令

```

可以使用以下命令查看Claude Code命令行工具的帮助信息：

```
    bash


    # 查看所有命令
    claude help

    # 查看特定命令的帮助
    claude help chat

    ### 2.3.5.2 聊天命令

    可以使用`chat`命令与Claude Code进行对话：

    # 启动交互式聊天
    claude chat
    # 或使用缩写
    cl chat

### 2.3.5.3 代码生成命令

```

可以使用`code`命令生成代码：

```javascript
    bash


    # 生成一个简单的Python函数
    claude code "write a Python function to calculate Fibonacci numbers"

### 2.3.5.4 代码解释命令

```

可以使用`explain`命令解释代码：

```python
    bash


    # 解释一个Python函数
    claude explain "def fib(n): return 1 if n <= 1 else fib(n-1) + fib(n-2)"

### 2.3.5.5 代码执行命令

```

可以使用`run`命令执行生成的代码：

```python
    bash


    # 执行一个Python函数
    claude run "def fib(n): return 1 if n <= 1 else fib(n-1) + fib(n-2)"

## 2.3.6 命令行工具的高级配置

### 2.3.6.1 配置输出格式

```

可以配置命令行工具的输出格式：

```
    bash


    # 配置输出格式为JSON
    claude config set output-format json

    # 配置输出格式为文本（默认）
    claude config set output-format text

    ### 2.3.6.2 配置超时时间

    可以配置命令行工具的超时时间：

    # 配置超时时间为60秒
    claude config set timeout 60

### 2.3.6.3 配置代理

```

如果你的网络环境需要使用代理，可以配置命令行工具的代理：

```
    bash


    # 配置HTTP代理
    claude config set proxy http://proxy.example.com:8080

    # 取消代理配置
    claude config unset proxy

## 2.3.7 常见问题与解决方案

### 2.3.7.1 命令未找到

```

**问题** ：运行`claude`命令时显示"command not found"

**解决方案** ：

  * 确保已正确安装Claude Code命令行工具
  * 检查npm全局安装路径是否已添加到系统环境变量中

```bash
  * 对于macOS和Linux，可以将以下行添加到`~/.bashrc`或`~/.zshrc`文件中： bash export PATH="$HOME/.npm/bin:$PATH"
    * 对于Windows，确保`%USERPROFILE%\AppData\Roaming\npm`已添加到系统环境变量中

### 2.3.7.2 登录失败

```

**问题** ：执行`claude login`命令后，浏览器打开但无法登录

**解决方案** ：

  * 检查网络连接
  * 确保你使用的是正确的Claude账户凭据
  * 检查浏览器是否阻止了弹出窗口
  * 尝试清除浏览器缓存和Cookie
  * 尝试使用不同的浏览器进行授权

### 2.3.7.3 命令执行失败

**问题** ：执行Claude Code命令时显示"API request failed"

**解决方案** ：

  * 检查网络连接
  * 确保已正确登录Claude账户
  * 检查配置的模型是否可用
  * 尝试增加超时时间
  * 检查是否有防火墙或代理设置阻止了API请求

## 2.3.8 命令行工具更新

可以通过以下命令更新Claude Code命令行工具：

```
    bash


    # 使用npm更新
    npm update -g claude-code
    # 使用yarn更新
    yarn global upgrade claude-code
    # 使用pnpm更新
    pnpm update -g claude-code

## 2.3.9 卸载命令行工具

```

如果需要卸载Claude Code命令行工具，可以使用以下命令：

```
    bash


    # 使用npm卸载
    npm uninstall -g claude-code

    # 使用yarn卸载
    yarn global remove claude-code

    # 使用pnpm卸载
    pnpm remove -g claude-code

## 2.3.10 命令行工具的使用场景

```

Claude Code命令行工具适合以下场景：

  1. **终端爱好者** ：喜欢在终端中进行开发的开发者
  2. **CI/CD流水线** ：在持续集成/持续部署流水线中集成Claude Code
  3. **脚本编写** ：编写自动化脚本时使用Claude Code生成代码
  4. **批量处理** ：批量处理代码文件或生成多个代码片段
  5. **远程服务器** ：在远程服务器上使用Claude Code（无图形界面环境）

## 2.3.11 总结

Claude Code命令行工具提供了一种在终端中使用Claude Code功能的方式，适合终端爱好者和需要在CI/CD流水线中集成Claude Code的场景。通过本小节的指导，你应该已经成功安装并配置了Claude Code命令行工具，可以开始使用它来辅助你的开发工作了。

接下来，我们将介绍如何注册Claude账户和进行授权，这是使用Claude Code的必要步骤。
